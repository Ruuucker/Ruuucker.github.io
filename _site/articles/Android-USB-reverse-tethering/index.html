<!DOCTYPE html>
<html lang="en">
	
<!-- Basic information about this page -->
<meta charset="UTF-8">
<link rel="icon" type="image/x-icon" href="/assets/img/fav.ico">
<title>
	
		Android USB reverse tethering ::
	
	Rucker :: Security Researcher
</title>

<!-- Meta tag looking for mobile devices -->
<meta name="viewport" content="initial-scale=1.5">
<meta name="theme-color" content="#232323">

<!-- Good information about this page -->
<meta name="description" content="Security Researcher">
<meta name="keywords" content="Security, Hacking">
<meta name="author" content="Rucker">

<!-- Style and scripts files -->
<link rel="stylesheet" type="text/css" href="/assets/css/style.css">

<!-- Extra information about this page -->
<link rel="license" type="text/plain" src="/assets/LICENSE">

<!-- Facebook, Linkedin, Reddit and many others Open Graph -->
<meta property="og:site_name" content="Rucker" />
<meta property="og:title" content="Rucker :: Security Researcher" />
<meta property="og:type" content="website" />
<meta property="og:description" content="Security Researcher" />
<meta property="og:url" content="https://ruuucker.github.io" />
<meta property="og:image:type" content="image/png" /> <!-- less than 5mB -->
<meta property="og:image:width" content="600" />
<meta property="og:image:height" content="315" />
<meta property="og:image" content="/assets/img/cover.svg" />
<meta property="og:locale" content="en" />
<meta property="og:locale:alternate" content="ru_RU" />
<meta property="fb:page_id" content="688484114615664" />

<!-- Twitter Cards -->
<meta name="twitter:card" content="summary" />
<meta name="twitter:title" content="Rucker :: Security Researcher" />
<meta name="twitter:description" content="Security Researcher" />
<meta name="twitter:url" content="https://ruuucker.github.io" />
<meta name="twitter:image" content="/assets/img/cover.svg" />
<meta name="twitter:author" content="" />

<!-- Linkedin OGP cards -->
<meta property="og:image" content="/assets/img/cover.svg" />
<meta property="og:image:width" content="180" />
<meta property="og:image:height" content="110" />

<!-- Google+ OGP cards -->
<meta itemprop="name" content="Rucker :: Security Researcher" />
<meta itemprop="author" content="" />
<meta itemprop="description" content="Security Researcher" />
<meta itemprop="image" content="/assets/img/cover.svg" />


<script type="text/javascript">
	if (window.location.protocol != "https:")
		window.location.href = "https:" + window.location.href.substring(window.location.protocol.length);
</script>

	<body>
		<header>
	<pre class="ascii name">
      ___           ___           ___           ___           ___           ___     
     /\  \         /\__\         /\  \         /\__\         /\  \         /\  \    
    /::\  \       /:/  /        /::\  \       /:/  /        /::\  \       /::\  \   
   /:/\:\  \     /:/  /        /:/\:\  \     /:/__/        /:/\:\  \     /:/\:\  \  
  /::\~\:\  \   /:/  /  ___   /:/  \:\  \   /::\__\____   /::\~\:\  \   /::\~\:\  \ 
 /:/\:\ \:\__\ /:/__/  /\__\ /:/__/ \:\__\ /:/\:::::\__\ /:/\:\ \:\__\ /:/\:\ \:\__\
 \/_|::\/:/  / \:\  \ /:/  / \:\  \  \/__/ \/_|:|~~|~    \:\~\:\ \/__/ \/_|::\/:/  /
    |:|::/  /   \:\  /:/  /   \:\  \          |:|  |      \:\ \:\__\      |:|::/  / 
    |:|\/__/     \:\/:/  /     \:\  \         |:|  |       \:\ \/__/      |:|\/__/  
    |:|  |        \::/  /       \:\__\        |:|  |        \:\__\        |:|  |    
     \|__|         \/__/         \/__/         \|__|         \/__/         \|__|    
       
</pre>
</header>

      	
      		<nav>
	<ul>
	<li><a href="/#">Home</a></li>
      	<li><a href="/#articles">Articles</a></li>
	<!-- <li><a href="/#methods">Methodolodys</a></li> --!>
		<li><a href="/#cheatsheets">Cheat Sheets</a></li>
      	<li><a href="/#tools">Tools</a></li>
      	<li><a href="/#contact">Contact</a></li>
	<li><a href="/ru/">Rus</a></li>
	</ul>
</nav>

		
		<main>
			<br>
<header>
	<h1>Android USB reverse tethering</h1>
</header>

<h1 class="no_toc" id="summary">Summary</h1>

<ul id="markdown-toc">
  <li><a href="#introduction" id="markdown-toc-introduction">Introduction</a></li>
  <li><a href="#requirements" id="markdown-toc-requirements">Requirements:</a>    <ul>
      <li><a href="#step-1" id="markdown-toc-step-1">Step 1:</a></li>
      <li><a href="#step-2" id="markdown-toc-step-2">Step 2:</a></li>
      <li><a href="#step-3" id="markdown-toc-step-3">Step 3:</a></li>
    </ul>
  </li>
  <li><a href="#simplified-instructions-mac-osx" id="markdown-toc-simplified-instructions-mac-osx">Simplified instructions (Mac OSX):</a></li>
</ul>

<h1 id="introduction">Introduction</h1>

<p>This guide is intended to help you share Internet connection from your PC to your Android smartphone/tablet via USB cable. This technique is called USB reverse tethering. It is different from USB tethering in which you share Internet from your Android to your PC. There are many reasons why you need this technique working:</p>

<ul>
  <li>You don’t have mobile/wifi network and your PC doesn’t have any wifi adapter</li>
  <li>You can’t do tethering over wifi, for example, your company doesn’t let you make any hotspot at work</li>
  <li>You don’t want to spend money for a mobile plan, and you want a more stable and faster Internet connection than wifi</li>
  <li>You don’t want your PC and your Android to become too hot because of wifi</li>
  <li>You want your Android charged while in use
…</li>
</ul>

<p>This method works following Internet connection sharing basics. If your Android device is able to do USB tethering, you will be able to do USB reserve tethering with this method!
Advantages:</p>

<ul>
  <li>
    <p>No additional software on your PC. Leave no trace on your PC. Imagine when you are at work and you have to install some crappy “toy” application on your PC to estiblish a tunnel connection for this task.</p>
  </li>
  <li>
    <p>Works with Windows, Linux and Mac OS X</p>
  </li>
  <li>
    <p>You know what you do. Who knows what the “easy-to-use” tools do when they fail to help you?
Disadvantages:</p>
  </li>
  <li>
    <p>You have to type some commands on your Android.
If you are ready, let’s start!</p>
  </li>
</ul>

<h1 id="requirements">Requirements:</h1>

<ul>
  <li>
    <p>Rooted Android device with “USB tethering” capability. Check in Android Settings - Wireless &amp; networks - Tethering &amp; portable hotspot. Many stock ROMs disable this capability. You must enable it somehow (root your Android and use an application to enable or replace the stock ROM). CyanogenMod ROMs always have this capability. The important thing to remember is when you connect your Android and enable “USB tethering”, it appears as a USB network adapter, not a mass storage or media device.</p>
  </li>
  <li>PC with a working Internet connection.</li>
  <li>USB cable to connect your Android to your PC.</li>
  <li>Terminal Emulator on your Android. If you don’t want to type commands on your touchscreen with Terminal Emulator, you can use your PC keyboard to enter commands with “adb shell”. adb is a part of Android SDK which is available for download from Google. To use adb, you need to enable “USB debugging” on your Android.</li>
  <li>Optional, BusyBox on your Android.</li>
</ul>

<h2 id="step-1">Step 1:</h2>

<p>Connect your Android to PC by USB cable and enable “USB tethering”. You are still allowed to enable this option even when your 3g/wifi on your Android is off.</p>

<ul>
  <li>
    <p>If you are using Linux (Ubuntu), you don’t need to install anything. NetworkManager applet will try to establish a connection on the new detected wired network device.</p>
  </li>
  <li>
    <p>If you are using Windows, Windows will automatically search Windows Update and install driver for you. You can skip Windows Update search and install manually an already included driver from Microsoft. In Install Driver window, click Browse My Computer, then Let me pick…, select Network Adapters, uncheck Show Compatible Hardware, look at “Microsoft Corporation” at the left column, and choose Remote NDIS Compatible Device from the right column. You can install or update a driver from Device Manager in Windows.</p>
  </li>
  <li>
    <p>If you are using Mac, install driver HoRNDIS. You will be notified about a new network interface. Click “Network Preferences” in the dialog to add it to known interfaces list. Then “Apply”.</p>
  </li>
  <li>
    <p>If you are using Linux without GUI or NetworkManager, run these commands as root (or use sudo):</p>
  </li>
</ul>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ifconfig usb0 10.42.0.1 netmask 255.255.255.0
</code></pre></div></div>

<p>(suppose that you don’t have any other USB network adapter, otherwise, your Android may be usb1, usb2…)</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>echo 1 &gt; /proc/sys/net/ipv4/ip_forward
</code></pre></div></div>

<p>Command for sudo will be:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo 'echo 1 &gt; /proc/sys/net/ipv4/ip_forward'

iptables -t nat -F
iptables -t nat -A POSTROUTING -j MASQUERADE
</code></pre></div></div>

<h2 id="step-2">Step 2:</h2>

<ul>
  <li>
    <p>If you are using Linux, click on NetworkManager applet at the top right of your screen, select “Edit Connections…”. In tab “Wired”, choose the new established connection (be careful, not Ethernet LAN connection) and click “Edit…” In tab “IPv4 Settings”, choose “Shared to other computers” as Method. Click “Save”. NetworkManager will reestablish the connection and assign to your PC an IP address on this USB network connection, default: 10.42.0.1. Leave Internet connections (wired or wireless) untouched.</p>
  </li>
  <li>
    <p>If you are using Windows, open “Network Connections” in Control Panel. It is somewhat different from setup in Linux. Right click on an Internet connection that you have. I assume that you are using a desktop which doesn’t have any wifi adapter, so right click on LAN Ethernet connection with Internet, and select “Properties”. In tab “Sharing” (or “Advanced” for Windows XP), click “Allow other network users to connect through…”, then select the USB connection in dropdown list below. Click OK. Windows will automatically setup your USB network connection and assign to it an IP address, default for Windows 7: 192.168.137.1, default for Windows 10: 192.168.0.1. You can see your Internet connection is now “Shared” and your USB connection is now “Unidentified network”.</p>
  </li>
  <li>
    <p>If you are using Mac, open System Preferences - Network. If you installed HoRNDIS, you will see a new network interface corresponding to your USB connection. With “Using DHCP” as Configure Ipv4, it may be already connected. Go back to System Preferences, click “Sharing”. Select “Internet Sharing”. Choose the Internet connection (Ethernet or Airport…) in “Share your connection from”, and choose USB connection interface in “To computers using”. Mac will assign to your USB connection interface an IP address, default: 192.168.2.1.</p>
  </li>
  <li>
    <p>If you are using Linux without GUI or NetworkManager, you have done all PC setup in step 1.</p>
  </li>
</ul>

<p>Your PC setup is now done!</p>

<h2 id="step-3">Step 3:</h2>
<p>Open Terminal Emulator on your Android. Type:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>su
</code></pre></div></div>

<p>Type the following command in Terminal Emulator, the same for all PC operating systems:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>netcfg rndis0 dhcp
</code></pre></div></div>

<p>The name for usb interface inside Android may vary. It is usually rndis0 or usb0. Type:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>busybox ifconfig
</code></pre></div></div>

<p>to identify the name.
Use OLD instructions below when automatical dhcp method does not work.
[OLD]Type these following commands in Terminal Emulator:
For Linux PC:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ifconfig rndis0 10.42.0.2 netmask 255.255.255.0
route add default gw 10.42.0.1 dev rndis0
</code></pre></div></div>

<p>If route fails, try:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>busybox route add default gw 10.42.0.1 dev rndis0
</code></pre></div></div>

<p>For Windows PC, use the same above commands, replace 10.42.0.2 by 192.168.137.2 (192.168.0.2 for Windows 10), replace 10.42.0.1 by 192.168.137.1 (192.168.0.1 for Windows 10)
For Mac PC, replace 10.42.0.2 by 192.168.2.2, replace 10.42.0.1 by 192.168.2.1
Now you can close Terminal Emulator and start the browser for Internet.</p>

<p>Some applications (download in Google Play, GMail, Facebook…) don’t recognize Internet connection. You can try this way (WARNING: NOT TESTED):</p>
<ul>
  <li>Enable temporarily 3G connection on your Android</li>
  <li>Type:</li>
</ul>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ifconfig rmnet0 0.0.0.0
</code></pre></div></div>

<p>The name for 3G interface inside Android may vary: ppp0, rmnet0… Type:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>busybox ifconfig
</code></pre></div></div>

<p>to identify the name.
before <code class="language-plaintext highlighter-rouge">ifconfig rmnet0 ...</code> above.
This will make applications see your Internet connection via USB as 3G!</p>

<p>USB tethering settings on Android will be reverted automatically when you unplug USB cable. To revert back settings on PC, uncheck “Allow other network users to connect through…” on Windows, “Internet sharing” on Mac, change from “Shared to other computers” back to “Automatically (DHCP)”, or simply delete USB connection from NetworkManager on Linux.</p>

<h1 id="simplified-instructions-mac-osx">Simplified instructions (Mac OSX):</h1>

<blockquote>
  <p>Mac: Install HorNDIS package.<br />
   Device: Turn on USB tethering under Settings &gt; More Settings &gt; Tethering and portable hotspot &gt; USB tethering<br />
   Plug in USB from device to computer.<br />
   Mac: Connect device under System Preferences &gt; Network &gt; SAMSUNG_Android <br />
   Mac: Add Internet Sharing under System Preferences &gt; Sharing &gt; Service &gt; Internet Sharing<br />
   Device: Root your device<br />
   Device: “netcfg rndis0 dhcp”<br />
   Device: “netcfg” to see the ip address of rndis0<br />
   Mac: “ifconfig” to see the ip address of your computer; use this ip address as mc_creator’s url input</p>
</blockquote>


		</main>
	</body>
</html>
